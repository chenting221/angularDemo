<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
      #drag{
        position: absolute;
        width:40px;
        height: 40px;
        background-color: #afa;
        cursor: pointer;
      }
  </style>
</head>
<body>
   <div id="drag"></div>
</body>

<script type="text/javascript">
    window.onload=function(){
       var oDiv=document.getElementById("drag");
       // 鼠标按下时，鼠标此时的位置
       oDiv.onmousedown=function(event){
           var event = event || window.event;
           var mouseX=event.clientX-drag.offsetLeft;
           var mouseY=event.clientY-drag.offsetTop;

           document.onmousemove=function(event){
             var event = event || window.event;
             var left=event.clientX-mouseX;
             var top=event.clientY-mouseY;
             if(left<0){
               left=0;
             }else if(left>window.innerWidth-drag.offsetWidth){
               left=window.innerWidth-drag.offsetWidth;
             }
             if(top<0){
               top=0;
             }else if(top>window.innerHeight-drag.offsetHeight){
               top=window.innerHeight-drag.offsetHeight;
             }
             drag.style.left=left+'px';
             drag.style.top=top+'px';
           };

           document.onmouseup=function(event){
             var event = event || window.event;
             this.onmousemove=null;
             this.onmouseup=null;
           }
       };


    }
</script>
</html>
